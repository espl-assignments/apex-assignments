<!--  Assignment 2
1. Query and display all the accounts in a tabular format on a visualforce page.
2. Display the columns name, phone, address.
3. Thename should be a hyperlink and on click of the link display contacts and opportunity records related to the account in different page block tables.
4. The page should be partially rendered and it should not reload.
-->

<apex:page Controller="DisplayAccountController">
	<apex:form >
  		<apex:pageBlock >
  			<apex:pageBlockTable value="{!acclst}" var="a">
				<apex:column headerValue="Name">
  					<apex:commandLink action="{!selacc}">
						<apex:param name="conlst" value="{!a.id}"/>
						<apex:outputText value="{!a.name}"/>
					</apex:commandlink>
				</apex:column>
			</apex:pageBlockTable>
			
			<!--accounts-->
    		<apex:pageBlockTable value="{!accounts1}" var="a">
    			<apex:column headerValue="AccountName" value="{!a.Name}"/>
    			<apex:column headerValue="Address" value="{!a.BillingCity}" />
    			<apex:column headerValue="Phone" value="{!a.Phone}"/>
    			
   			 	<!--contacts-->
    			<apex:column headerValue="List contacts">
   					<apex:pageBlockTable value="{!a.contacts}" var="c">
  						<apex:column headerValue="ContactName">
  							<apex:outputText value="{!c.lastname}"> </apex:outputText>
  						</apex:column>
  					</apex:pageBlockTable><!-- End contact-->
  				</apex:column>
  					
  				<!--opportunities-->
  				<apex:column headerValue="Opportunity list">
  					<apex:pageBlockTable value="{!a.opportunities}" var="p">
  						<apex:column headerValue="Opportunity Name">
  							<apex:outputText value="{!p.name}">	</apex:outputText>
  						</apex:column>
  					</apex:pageBlockTable><!-- End opportunity-->
  				</apex:column>
 			</apex:pageBlockTable><!--end account-->
  		</apex:pageBlock>
	</apex:form>
</apex:page>